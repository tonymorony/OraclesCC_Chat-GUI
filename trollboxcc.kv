#:import Factory kivy.factory.Factory
#:import ListAdapter kivy.adapters.listadapter.ListAdapter
#:import ListItemButton kivy.uix.listview.ListItemButton
<CreateRoomPopup@Popup>:
    title: 'New chat room creation'
    auto_dismiss: False
    Button:
        text: 'Close me!'
        on_release: root.dismiss()

<SubscribeOnRoom@Popup>:
    title: 'Subscription on room'
    auto_dismiss: False
    Button:
        text: 'Close me!'
        on_release: root.dismiss()

BoxLayout:

    orientation: 'horizontal'
    padding: 10

    BoxLayout:

        orientation: 'vertical'
        padding: 10

        Label:
            size_hint: (None, 0.05)
            valign: 'top'
            text: 'ROOMS'
        BoxLayout:
            # rooms list area
            ListView:
                id: roomslist
                adapter: ListAdapter(data = app.get_rooms_list(), cls = ListItemButton)

        Button:

            text: 'Create room'
            on_release: Factory.CreateRoomPopup().open()
            size_hint: 1, 0.09

        Button:

            text: 'Subscribe on room'
            on_release: Factory.CreateRoomPopup().open()
            size_hint: 1, 0.09

        Button:

            text: 'Refresh rooms list'
            size_hint: 1, 0.09
            on_press: app.callback_refresh_rooms(roomslist)

    BoxLayout:

        orientation: 'vertical'
        padding: 10

        Label:
            size_hint: (None, 0.05)
            valign: 'top'
            text: 'MESSAGES'


        ScrollView:
            #messages box area
            ListView:
                id: messagesbox
                item_strings: []

        BoxLayout:

            orientation: 'horizontal'
            size_hint: 1, 0.27

            TextInput:
                id: inputmsg

            Button:

                text: 'Send'
                on_press: app.send_message(messagesbox, inputmsg)
                size_hint: 0.2, 1